<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF‑8">
<meta name="viewport" content="width=device‑width, initial‑scale=1.0">
<title>Timestamp Discord Style r.3v.fi</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #1a1a2e;
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2rem;
  }

  .container {
    background: #22223b;
    padding: 2rem;
    border-radius: 1rem;
    width: 100%;
    max-width: 450px;
  }

  h1 { text-align: center; margin-bottom: 1rem; }

  /* Calendrier */
  .calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    margin-bottom: 1rem;
  }

  .calendar div {
    padding: 8px;
    text-align: center;
    cursor: pointer;
    background: #362e6d;
    border-radius: 6px;
    transition: 0.2s;
  }
  .calendar div:hover { background: #4a47a3; }
  .calendar .selected { background: #ff6b6b; }

  .nav {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
  }
  .nav button {
    background: #4a47a3;
    border: none;
    padding: 4px 8px;
    border-radius: 6px;
    cursor: pointer;
  }

  /* Horloge */
  .clock {
    width: 260px;
    height: 260px;
    border: 4px solid #4a47a3;
    border-radius: 50%;
    position: relative;
    margin: auto;
    margin-bottom: 1rem;
  }
  .hourHand, .minuteHand {
    position: absolute;
    left: 50%;
    top: 50%;
    background: #ff6b6b;
    transform-origin: bottom;
    pointer-events: none;
  }
  .hourHand { width: 6px; height: 60px; }
  .minuteHand { width: 4px; height: 90px; background: #f7d794; }

  .clockNumbers {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
  .clockNumbers div {
    position: absolute;
    width: 20px;
    text-align: center;
    font-size: 14px;
    font-weight: bold;
  }

  /* Result */
  #result {
    width: 100%;
    padding: 0.5rem;
    margin-bottom: 0.5rem;
    border-radius: 0.5rem;
    border: none;
    background: #362e6d;
    color: white;
    font-family: monospace;
    text-align: center;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Discord Timestamp</h1>

  <!-- Calendrier -->
  <div class="nav">
    <button id="prevMonth">&lt;</button>
    <span id="monthYear"></span>
    <button id="nextMonth">&gt;</button>
  </div>
  <div class="calendar" id="calendar"></div>

  <!-- Horloge -->
  <div class="clock" id="clock">
    <div class="clockNumbers"></div>
    <div class="hourHand"></div>
    <div class="minuteHand"></div>
  </div>

  <button onclick="generateTimestamp()">Générer</button>
  <input id="result" readonly>
</div>

<script>
let selectedDate = new Date();
let selectedHour = selectedDate.getHours();
let selectedMinute = selectedDate.getMinutes();

// Render calendar
function renderCalendar() {
  const cal = document.getElementById('calendar');
  cal.innerHTML='';
  const year = selectedDate.getFullYear();
  const month = selectedDate.getMonth();
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month+1, 0).getDate();

  document.getElementById('monthYear').textContent =
    selectedDate.toLocaleString('default',{ month:'long', year:'numeric' });

  for(let i=0;i<firstDay;i++) cal.innerHTML += '<div></div>';
  for(let d=1; d<=daysInMonth; d++){
    const cell = document.createElement('div');
    cell.textContent = d;
    if(d === selectedDate.getDate()) cell.classList.add('selected');
    cell.onclick = ()=>{ selectedDate.setDate(d); renderCalendar(); };
    cal.appendChild(cell);
  }
}

document.getElementById('prevMonth').onclick = ()=>{ selectedDate.setMonth(selectedDate.getMonth()-1); renderCalendar(); };
document.getElementById('nextMonth').onclick = ()=>{ selectedDate.setMonth(selectedDate.getMonth()+1); renderCalendar(); };
renderCalendar();

// Clock visuals
const clock = document.getElementById('clock');
const hourHand = document.querySelector('.hourHand');
const minuteHand = document.querySelector('.minuteHand');
const clockNumbers = document.querySelector('.clockNumbers');

// place numbers
for(let i=1; i<=12; i++){
  const num = document.createElement('div');
  const angle = (i/12)*360;
  const rad = Math.PI * angle/180;
  num.style.top = `${50 - Math.cos(rad)*40}%`;
  num.style.left= `${50 + Math.sin(rad)*40}%`;
  num.textContent = i;
  clockNumbers.appendChild(num);
}

function updateHands() {
  hourHand.style.transform = `rotate(${selectedHour*30 + selectedMinute*0.5}deg) translate(-50%,-100%)`;
  minuteHand.style.transform = `rotate(${selectedMinute*6}deg) translate(-50%,-100%)`;
}
updateHands();

// Click on clock to set time
clock.onclick = (e) => {
  const rect = clock.getBoundingClientRect();
  const x = e.clientX - (rect.left + rect.width/2);
  const y = e.clientY - (rect.top + rect.height/2);
  const angle = Math.atan2(y, x) * (180 / Math.PI) + 90;
  const normalized = (angle<0 ? angle+360 : angle);
  selectedHour = Math.floor(normalized / 30);
  selectedMinute = Math.floor((normalized % 30)*2);
  updateHands();
};

// Generate timestamp
function generateTimestamp() {
  selectedDate.setHours(selectedHour);
  selectedDate.setMinutes(selectedMinute);
  const unix = Math.floor(selectedDate.getTime()/1000);
  document.getElementById('result').value = `<t:${unix}:f>`;
}

</script>

</body>
</html>
